(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01c0ce74"],{4992:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vault",staticStyle:{margin:"20px"}},[n("el-row",{attrs:{gutter:24}},[n("el-col",{staticStyle:{margin:"10px auto auto"},attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:8}},[n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("抽奖规则")])]),n("el-form",{attrs:{"label-width":"85px"}},[n("el-form-item",{attrs:{label:"一等奖："}},[t._v(" 1个 200BHP ")]),n("el-form-item",{attrs:{label:"二等奖："}},[t._v(" 5个 50BHP ")]),n("el-form-item",{attrs:{label:"三等奖："}},[t._v(" 7个 30BHP ")]),n("el-form-item",{attrs:{label:"合约地址："}},[n("el-link",{attrs:{target:"_blank",href:t.contractUrl}},[t._v(t._s(t.contractAddress))])],1)],1)],1)],1),n("el-col",{staticStyle:{margin:"10px auto auto"},attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:8}},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("1、报名抽奖")])]),n("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[n("el-form-item",{attrs:{label:"参与代号"}},[n("el-input",{attrs:{maxlength:"12",placeholder:"参与代号"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.luckyDraw()}}},[t._v("报名抽奖")])],1)],1)],1)],1),n("el-col",{staticStyle:{margin:"10px auto auto"},attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:8}},[n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("2、获取本人中奖信息")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.drawPrize()}}},[t._v("获取")])],1)])],1),n("el-col",{staticStyle:{margin:"10px auto auto"},attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:8}},[n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("3、获取参与人数")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.getAddressInfo()}}},[t._v("获取")])],1)])],1),n("el-col",{staticStyle:{margin:"10px auto auto"},attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:8}},[n("el-card",[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v("4、获取中奖信息")]),n("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){return t.getPrizeInfo()}}},[t._v("获取")])],1)])],1)],1),n("el-dialog",{attrs:{title:t.title,visible:t.dialogTableVisible,width:t.dialogWidth},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[n("el-table",{attrs:{data:t.tableData}},[n("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"}}),n("el-table-column",{attrs:{prop:"name",align:"center",label:"代号",width:"200"}}),n("el-table-column",{attrs:{prop:"address",align:"center",label:"地址"}}),n("el-table-column",{attrs:{prop:"time",align:"center",label:"时间",width:"200"}})],1)],1),n("el-dialog",{attrs:{title:t.title,visible:t.dialogResultVisible,"before-close":t.handleClose,width:t.dialogWidth},on:{"update:visible":function(e){t.dialogResultVisible=e}}},[n("span",[t._v(t._s(t.info))]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogResultVisible=!1}}},[t._v("关闭")])],1)]),n("el-dialog",{attrs:{title:t.title,visible:t.dialogTableAddressVisible,width:t.dialogWidth},on:{"update:visible":function(e){t.dialogTableAddressVisible=e}}},[n("el-table",{attrs:{data:t.tableAddressData}},[n("el-table-column",{attrs:{label:"序号",type:"index",align:"center",width:"50"}}),n("el-table-column",{attrs:{prop:"name",align:"center",label:"代号",width:"200"}}),n("el-table-column",{attrs:{prop:"address",align:"center",label:"地址"}}),n("el-table-column",{attrs:{prop:"desc",align:"center",label:"结果",width:"180"}})],1)],1)],1)},i=[],r=(n("4160"),n("b0c0"),n("159b"),n("d3b7"),n("96cf"),n("1da1")),s={contractName:"LuckyDraw",abi:[{inputs:[{internalType:"string",name:"_name",type:"string"}],name:"luckyDraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"openPrize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_firstPrize",type:"uint256"},{internalType:"uint256",name:"_secondPrize",type:"uint256"},{internalType:"uint256",name:"_thirdPrize",type:"uint256"},{internalType:"uint256",name:"_PCount",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"Count",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"drawPrize",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"firstPrize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAddress",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAddressInfo",outputs:[{components:[{internalType:"address",name:"addr",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"joinTime",type:"uint256"}],internalType:"struct Lottery.addressInfo[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getFirstPrizeAddress",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRewardInfo",outputs:[{components:[{internalType:"address",name:"addr",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"prizes",type:"uint256"}],internalType:"struct Lottery.rewardInfo[]",name:"",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getSecondPrizeAddress",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getThirdPrizeAddress",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"PCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"prizes",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"secondPrize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"starttime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"thirdPrize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}]},l="0x7B4e6f7CBA9E441eC87742afFC2bfbfe8F1771eb";function o(t,e,n){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function t(e,n,a){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(t,e,n,a,i){return new Promise((function(t,r){e.methods.luckyDraw(a).send({from:n}).on("transactionHash",(function(t){i({message:t,options:{key:(new Date).getTime()+Math.random(),variant:"success"},hash:t})})).on("receipt",(function(e){console.log(e),t(e)})).on("error",(function(t){console.log(t),r(t)})).catch((function(t){console.log(t),r(t)}))}))},i=new e.web3.eth.Contract(s.abi,l),t.next=4,d(e,n);case 4:return t.abrupt("return",r(e.web3,i,e.address,n,a));case 5:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function c(t){return p.apply(this,arguments)}function p(){return p=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new e.web3.eth.Contract(s.abi,l),t.abrupt("return",n.methods.getAddressInfo().call({from:e.address}));case 2:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function d(t,e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var a,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new e.web3.eth.Contract(s.abi,l),i=e.web3,console.log(e.address),console.log(a.methods.luckyDraw(n).encodeABI()),o={from:e.address,to:l,data:a.methods.luckyDraw(n).encodeABI()},t.abrupt("return",new Promise(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i.eth.estimateGas(o).then((function(t){e(t)})).catch((function(t){n(t)}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 6:case"end":return t.stop()}}),t)}))),f.apply(this,arguments)}function m(t,e){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new e.web3.eth.Contract(s.abi,l),t.abrupt("return",a.methods.prizes(n).call({from:e.address}));case 2:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}function g(t){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new e.web3.eth.Contract(s.abi,l),t.abrupt("return",n.methods.drawPrize().call({from:e.address}));case 2:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function y(t){return w.apply(this,arguments)}function w(){return w=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new e.web3.eth.Contract(s.abi,l),t.abrupt("return",n.methods.getRewardInfo().call({from:e.address}));case 2:case"end":return t.stop()}}),t)}))),w.apply(this,arguments)}var v="https://scan.bhpnet.io/tx/",x=n("901e"),T=n.n(x),$={data:function(){return{dialogTableVisible:!1,dialogTableAddressVisible:!1,dialogResultVisible:!1,title:"",address:"",info:"",name:"",contractUrl:"",contractAddress:"",tableData:[],tableAddressData:[],dialogWidth:0,dialogFormVisible:!1,formInline:{user:"",region:""},getValidatorInfoResult:[]}},beforeDestroy:function(){clearInterval(this.timer)},filters:{toBHP:function(t){var e=new T.a(t);return e.div("1000000000000000000").toPrecision(18)},formatTime:function(t){return new Date(1e3*parseInt(t)).toLocaleString()}},created:function(){this.contractAddress=l,this.contractUrl="https://testnet.bhpnet.io/address/"+l+"/contracts",console.log(l)},mounted:function(){var t=this;window.onresize=function(){return function(){t.setDialogWidth()}()}},methods:{handleClose:function(){this.dialogTableVisible=!1,this.dialogResultVisible=!1},getErrorInfo:function(t){this.title="错误提示",this.info=t,this.dialogResultVisible=!0},verifyConnect:function(){var t=this.$store.state.wallet;return t.connected?(this.address=this.$store.state.wallet.address,!0):(alert("请先连接钱包"),!1)},setDialogWidth:function(){var t=document.body.clientWidth,e=900;this.dialogWidth=t<e?"90%":e+"px"},getPrizeInfo:function(){var t=this;this.tableAddressData=[],this.verifyConnect()&&y(this.$store.state.wallet,(function(t){console.log(t)})).then((function(e){console.log(e),e.forEach((function(e){var n;n="1"===e.prizes?"一等奖":"2"===e.prizes?"二等奖":"三等奖";var a={address:e.addr,desc:n,name:e.name};t.tableAddressData.push(a)})),t.title="中奖结果",t.dialogTableAddressVisible=!0})).catch((function(e){t.getErrorInfo(e)}))},luckyDraw:function(){var t=this;this.verifyConnect()&&(""===this.name?this.$message({showClose:!0,message:"代号不能为空",type:"warning"}):this.name.length>12?this.$message({showClose:!0,message:"代号不能超过12个字母",type:"warning"}):(this.$parent.loading=!0,this.$parent.flag1=!0,this.$parent.flag2=!1,this.$parent.flag3=!1,o(this.$store.state.wallet,this.name,(function(e){console.log(e),t.$parent.url=v+e.message,t.$parent.flag2=!0,t.$parent.flag1=!1,t.$parent.flag3=!1})).then((function(e){t.$parent.loading=!1,t.title="返回结果",t.info="参与成功！",t.dialogResultVisible=!0})).catch((function(e){t.$parent.loading=!1,t.getErrorInfo(e)}))))},drawPrize:function(){var t=this;this.verifyConnect()&&(this.$parent.flag1=!0,this.$parent.flag2=!1,this.$parent.flag3=!1,g(this.$store.state.wallet,(function(e){console.log(e),t.$parent.url=v+e.message,t.$parent.flag2=!0,t.$parent.flag1=!1,t.$parent.flag3=!1})).then((function(e){console.log("是否开奖",e),t.prizes(e)})).catch((function(e){t.getErrorInfo(e)})))},prizes:function(t){var e=this;this.$parent.flag1=!0,this.$parent.flag2=!1,this.$parent.flag3=!1,m(this.$store.state.wallet,this.address,(function(t){e.$parent.url=v+t.message,e.$parent.flag2=!0,e.$parent.flag1=!1,e.$parent.flag3=!1})).then((function(n){var a,i=n;"0"!==i||t?(e.title="中奖信息",a="1"===i?"一等奖":"2"===i?"二等奖":"三等奖",e.info="地址："+e.address+"\n 中奖结果："+a,e.dialogResultVisible=!0):(e.title="中奖信息",e.info="还未开奖",e.dialogResultVisible=!0)})).catch((function(t){e.getErrorInfo(t)}))},getAddressInfo:function(){var t=this;this.verifyConnect()&&(this.$parent.flag1=!0,this.$parent.flag2=!1,this.$parent.flag3=!1,c(this.$store.state.wallet,(function(e){t.$parent.url=v+e.message,t.$parent.flag2=!0,t.$parent.flag1=!1,t.$parent.flag3=!1})).then((function(e){console.log(e),t.tableData=[],e.forEach((function(e){var n={address:e.addr,name:e.name.substr(0,12),time:new Date(1e3*parseInt(e.joinTime)).toLocaleString()};t.tableData.push(n)})),t.title="参与人数",t.dialogTableVisible=!0})).catch((function(e){t.getErrorInfo(e)})))}}},C=$,k=n("2877"),R=Object(k["a"])(C,a,i,!1,null,null,null);e["default"]=R.exports},b0c0:function(t,e,n){var a=n("83ab"),i=n("9bf2").f,r=Function.prototype,s=r.toString,l=/^\s*function ([^ (]*)/,o="name";a&&!(o in r)&&i(r,o,{configurable:!0,get:function(){try{return s.call(this).match(l)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-01c0ce74.c2c93023.js.map